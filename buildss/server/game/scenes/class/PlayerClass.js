"use strict";
//@ts-nocheck
Object.defineProperty(exports, "__esModule", { value: true });
const RoomState_1 = require("../../RoomState");
class PlayerClass extends Phaser.Physics.Arcade.Sprite {
    constructor(scene, x, y, sprite, ClientID) {
        super(scene, x, y, sprite);
        this.init(scene, ClientID);
    }
    init(scene, ClientID) {
        this.scene = scene;
        this.ClientID = ClientID;
    }
    update(time, deltaTime) {
        const input = this.scene.room.userInputs[this.ClientID];
        const { up, right, down, left, space } = input;
        let dir = 0;
        if (left) {
            dir += -1;
        }
        if (right) {
            dir += 1;
        }
        if (space) {
            this.setVelocityY(-900);
        }
        if (up) {
            this.setVelocityY(-300);
        }
        this.setVelocityX(dir * deltaTime * 10);
        this.scene.room.state.presences.set(this.ClientID, new RoomState_1.Player({ x: this.x, y: this.y }));
    }
}
exports.default = PlayerClass;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyQ2xhc3MuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9zcmMvc2VydmVyL2dhbWUvc2NlbmVzL2NsYXNzL1BsYXllckNsYXNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxhQUFhOztBQUViLCtDQUF3QztBQUV4QyxNQUFxQixXQUFZLFNBQVEsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsTUFBTTtJQUNuRSxZQUNFLEtBQW1CLEVBQ25CLENBQVMsRUFDVCxDQUFTLEVBQ1QsTUFBYyxFQUNkLFFBQWdCO1FBRWhCLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQTtRQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxRQUFRLENBQUMsQ0FBQTtJQUM1QixDQUFDO0lBRUQsSUFBSSxDQUFDLEtBQW1CLEVBQUUsUUFBZ0I7UUFDeEMsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7UUFDbEIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7SUFDMUIsQ0FBQztJQUVELE1BQU0sQ0FBQyxJQUFZLEVBQUUsU0FBaUI7UUFDcEMsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUN2RCxNQUFNLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEtBQUssQ0FBQTtRQUU5QyxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUE7UUFFWCxJQUFJLElBQUksRUFBRTtZQUNSLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQTtTQUNWO1FBQ0QsSUFBSSxLQUFLLEVBQUU7WUFDVCxHQUFHLElBQUksQ0FBQyxDQUFBO1NBQ1Q7UUFFRCxJQUFJLEtBQUssRUFBRTtZQUNULElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtTQUN4QjtRQUVELElBQUksRUFBRSxFQUFFO1lBQ04sSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO1NBQ3hCO1FBRUQsSUFBSSxDQUFDLFlBQVksQ0FBQyxHQUFHLEdBQUcsU0FBUyxHQUFHLEVBQUUsQ0FBQyxDQUFBO1FBRXZDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUNqQyxJQUFJLENBQUMsUUFBUSxFQUNiLElBQUksa0JBQU0sQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FDckMsQ0FBQTtJQUNILENBQUM7Q0FDRjtBQTdDRCw4QkE2Q0MifQ==